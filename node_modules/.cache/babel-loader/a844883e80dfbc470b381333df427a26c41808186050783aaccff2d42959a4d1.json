{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useEffect, useState } from 'react';\nimport { findUpUntil } from '../../dom';\nimport { createSingletonHandler } from '../singleton-handler';\nimport { useStableCallback } from '../stable-callback';\nexport function isMotionDisabled(element) {\n  var _a, _b;\n  return !!findUpUntil(element, function (node) {\n    return node.classList.contains('awsui-motion-disabled');\n  }) || ((_b = (_a = window.matchMedia) === null || _a === void 0 ? void 0 : _a.call(window, '(prefers-reduced-motion: reduce)').matches) !== null && _b !== void 0 ? _b : false);\n}\n// Note that this hook doesn't take into consideration @media print (unlike the dark mode CSS),\n// due to challenges with cross-browser implementations of media/print state change listeners.\n// This means that components using this hook will render in dark mode even when printing.\nexport function useCurrentMode(elementRef) {\n  var _a = useState('light'),\n    value = _a[0],\n    setValue = _a[1];\n  useMutationObserver(elementRef, function (node) {\n    var darkModeParent = findUpUntil(node, function (node) {\n      return node.classList.contains('awsui-polaris-dark-mode') || node.classList.contains('awsui-dark-mode');\n    });\n    setValue(darkModeParent ? 'dark' : 'light');\n  });\n  return value;\n}\nexport function useDensityMode(elementRef) {\n  var _a = useState('comfortable'),\n    value = _a[0],\n    setValue = _a[1];\n  useMutationObserver(elementRef, function (node) {\n    var compactModeParent = findUpUntil(node, function (node) {\n      return node.classList.contains('awsui-polaris-compact-mode') || node.classList.contains('awsui-compact-mode');\n    });\n    setValue(compactModeParent ? 'compact' : 'comfortable');\n  });\n  return value;\n}\nexport function useReducedMotion(elementRef) {\n  var _a = useState(false),\n    value = _a[0],\n    setValue = _a[1];\n  useMutationObserver(elementRef, function (node) {\n    setValue(isMotionDisabled(node));\n  });\n  return value;\n}\nvar useMutationSingleton = createSingletonHandler(function (handler) {\n  var observer = new MutationObserver(function () {\n    return handler();\n  });\n  observer.observe(document.body, {\n    attributes: true,\n    subtree: true\n  });\n  return function () {\n    return observer.disconnect();\n  };\n});\nfunction useMutationObserver(elementRef, onChange) {\n  var handler = useStableCallback(function () {\n    if (elementRef.current) {\n      onChange(elementRef.current);\n    }\n  });\n  useMutationSingleton(handler);\n  useEffect(function () {\n    handler();\n  }, [handler]);\n}","map":{"version":3,"names":["useEffect","useState","findUpUntil","createSingletonHandler","useStableCallback","isMotionDisabled","element","_a","_b","node","classList","contains","window","matchMedia","call","matches","useCurrentMode","elementRef","value","setValue","useMutationObserver","darkModeParent","useDensityMode","compactModeParent","useReducedMotion","useMutationSingleton","handler","observer","MutationObserver","observe","document","body","attributes","subtree","disconnect","onChange","current"],"sources":["/Users/ndwang/Documents/projects/face2alias_aws/node_modules/@cloudscape-design/component-toolkit/lib/internal/visual-mode/index.js"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useEffect, useState } from 'react';\nimport { findUpUntil } from '../../dom';\nimport { createSingletonHandler } from '../singleton-handler';\nimport { useStableCallback } from '../stable-callback';\nexport function isMotionDisabled(element) {\n    var _a, _b;\n    return (!!findUpUntil(element, function (node) { return node.classList.contains('awsui-motion-disabled'); }) ||\n        ((_b = (_a = window.matchMedia) === null || _a === void 0 ? void 0 : _a.call(window, '(prefers-reduced-motion: reduce)').matches) !== null && _b !== void 0 ? _b : false));\n}\n// Note that this hook doesn't take into consideration @media print (unlike the dark mode CSS),\n// due to challenges with cross-browser implementations of media/print state change listeners.\n// This means that components using this hook will render in dark mode even when printing.\nexport function useCurrentMode(elementRef) {\n    var _a = useState('light'), value = _a[0], setValue = _a[1];\n    useMutationObserver(elementRef, function (node) {\n        var darkModeParent = findUpUntil(node, function (node) { return node.classList.contains('awsui-polaris-dark-mode') || node.classList.contains('awsui-dark-mode'); });\n        setValue(darkModeParent ? 'dark' : 'light');\n    });\n    return value;\n}\nexport function useDensityMode(elementRef) {\n    var _a = useState('comfortable'), value = _a[0], setValue = _a[1];\n    useMutationObserver(elementRef, function (node) {\n        var compactModeParent = findUpUntil(node, function (node) { return node.classList.contains('awsui-polaris-compact-mode') || node.classList.contains('awsui-compact-mode'); });\n        setValue(compactModeParent ? 'compact' : 'comfortable');\n    });\n    return value;\n}\nexport function useReducedMotion(elementRef) {\n    var _a = useState(false), value = _a[0], setValue = _a[1];\n    useMutationObserver(elementRef, function (node) {\n        setValue(isMotionDisabled(node));\n    });\n    return value;\n}\nvar useMutationSingleton = createSingletonHandler(function (handler) {\n    var observer = new MutationObserver(function () { return handler(); });\n    observer.observe(document.body, { attributes: true, subtree: true });\n    return function () { return observer.disconnect(); };\n});\nfunction useMutationObserver(elementRef, onChange) {\n    var handler = useStableCallback(function () {\n        if (elementRef.current) {\n            onChange(elementRef.current);\n        }\n    });\n    useMutationSingleton(handler);\n    useEffect(function () {\n        handler();\n    }, [handler]);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}