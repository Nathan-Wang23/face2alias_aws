{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useCallback, useEffect, useRef } from 'react';\nimport clsx from 'clsx';\nimport { KeyCode } from '../internal/keycode';\nimport { useUniqueId } from '../internal/hooks/use-unique-id';\nimport { InternalButton } from '../button/internal';\nimport FocusLock from '../internal/components/focus-lock';\nimport styles from './styles.css.js';\nimport { useInternalI18n } from '../internal/i18n/context';\nexport default function PopoverBody(_ref) {\n  let {\n    dismissButton: showDismissButton,\n    dismissAriaLabel,\n    header,\n    children,\n    onDismiss,\n    variant,\n    overflowVisible,\n    className,\n    ariaLabelledby\n  } = _ref;\n  const i18n = useInternalI18n('popover');\n  const labelledById = useUniqueId('awsui-popover-');\n  const dismissButtonFocused = useRef(false);\n  const dismissButtonRef = useRef(null);\n  const onKeyDown = useCallback(event => {\n    if (event.keyCode === KeyCode.escape) {\n      onDismiss();\n    }\n  }, [onDismiss]);\n  // Implement our own auto-focus rather than using FocusLock's,\n  // because we also want to focus the dismiss button when it\n  // is added dyamically (e.g. in chart popovers)\n  useEffect(() => {\n    var _a;\n    if (showDismissButton && !dismissButtonFocused.current) {\n      (_a = dismissButtonRef.current) === null || _a === void 0 ? void 0 : _a.focus({\n        preventScroll: true\n      });\n    }\n    dismissButtonFocused.current = showDismissButton;\n  }, [showDismissButton]);\n  const dismissButton = (showDismissButton !== null && showDismissButton !== void 0 ? showDismissButton : null) && React.createElement(\"div\", {\n    className: styles.dismiss\n  }, React.createElement(InternalButton, {\n    variant: \"icon\",\n    formAction: \"none\",\n    iconName: \"close\",\n    className: styles['dismiss-control'],\n    ariaLabel: i18n('dismissAriaLabel', dismissAriaLabel),\n    onClick: () => onDismiss(),\n    ref: dismissButtonRef\n  }));\n  const isDialog = showDismissButton;\n  const shouldTrapFocus = showDismissButton && variant !== 'annotation';\n  const dialogProps = isDialog ? {\n    role: 'dialog',\n    'aria-modal': shouldTrapFocus ? true : undefined,\n    'aria-labelledby': ariaLabelledby !== null && ariaLabelledby !== void 0 ? ariaLabelledby : header ? labelledById : undefined\n  } : {};\n  return React.createElement(\"div\", Object.assign({\n    className: clsx(styles.body, className, {\n      [styles['body-overflow-visible']]: overflowVisible === 'both'\n    }),\n    onKeyDown: onKeyDown\n  }, dialogProps), React.createElement(FocusLock, {\n    disabled: !shouldTrapFocus,\n    autoFocus: false\n  }, header && React.createElement(\"div\", {\n    className: clsx(styles['header-row'], showDismissButton && styles['has-dismiss'])\n  }, dismissButton, React.createElement(\"div\", {\n    className: styles.header,\n    id: labelledById\n  }, React.createElement(\"h2\", null, header))), React.createElement(\"div\", {\n    className: !header && showDismissButton ? styles['has-dismiss'] : undefined\n  }, !header && dismissButton, React.createElement(\"div\", {\n    className: clsx(styles.content, {\n      [styles['content-overflow-visible']]: !!overflowVisible\n    })\n  }, children))));\n}","map":{"version":3,"names":["React","useCallback","useEffect","useRef","clsx","KeyCode","useUniqueId","InternalButton","FocusLock","styles","useInternalI18n","PopoverBody","_ref","dismissButton","showDismissButton","dismissAriaLabel","header","children","onDismiss","variant","overflowVisible","className","ariaLabelledby","i18n","labelledById","dismissButtonFocused","dismissButtonRef","onKeyDown","event","keyCode","escape","current","_a","focus","preventScroll","createElement","dismiss","formAction","iconName","ariaLabel","onClick","ref","isDialog","shouldTrapFocus","dialogProps","role","undefined","Object","assign","body","disabled","autoFocus","id","content"],"sources":["/Users/ndwang/Documents/projects/face2alias_aws/node_modules/@cloudscape-design/components/popover/lib/default/popover/body.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useCallback, useEffect, useRef } from 'react';\nimport clsx from 'clsx';\n\nimport { KeyCode } from '../internal/keycode';\nimport { useUniqueId } from '../internal/hooks/use-unique-id';\nimport { ButtonProps } from '../button/interfaces';\nimport { InternalButton } from '../button/internal';\nimport FocusLock from '../internal/components/focus-lock';\n\nimport styles from './styles.css.js';\nimport { useInternalI18n } from '../internal/i18n/context';\n\nexport interface PopoverBodyProps {\n  dismissButton: boolean;\n  dismissAriaLabel: string | undefined;\n  onDismiss: () => void;\n\n  header: React.ReactNode | undefined;\n  children: React.ReactNode;\n  variant?: 'annotation';\n  overflowVisible?: 'content' | 'both';\n\n  className?: string;\n  ariaLabelledby?: string;\n}\n\nexport default function PopoverBody({\n  dismissButton: showDismissButton,\n  dismissAriaLabel,\n  header,\n  children,\n  onDismiss,\n  variant,\n  overflowVisible,\n  className,\n  ariaLabelledby,\n}: PopoverBodyProps) {\n  const i18n = useInternalI18n('popover');\n  const labelledById = useUniqueId('awsui-popover-');\n  const dismissButtonFocused = useRef(false);\n  const dismissButtonRef = useRef<ButtonProps.Ref>(null);\n\n  const onKeyDown = useCallback(\n    (event: React.KeyboardEvent) => {\n      if (event.keyCode === KeyCode.escape) {\n        onDismiss();\n      }\n    },\n    [onDismiss]\n  );\n\n  // Implement our own auto-focus rather than using FocusLock's,\n  // because we also want to focus the dismiss button when it\n  // is added dyamically (e.g. in chart popovers)\n  useEffect(() => {\n    if (showDismissButton && !dismissButtonFocused.current) {\n      dismissButtonRef.current?.focus({ preventScroll: true });\n    }\n    dismissButtonFocused.current = showDismissButton;\n  }, [showDismissButton]);\n\n  const dismissButton = (showDismissButton ?? null) && (\n    <div className={styles.dismiss}>\n      <InternalButton\n        variant=\"icon\"\n        formAction=\"none\"\n        iconName=\"close\"\n        className={styles['dismiss-control']}\n        ariaLabel={i18n('dismissAriaLabel', dismissAriaLabel)}\n        onClick={() => onDismiss()}\n        ref={dismissButtonRef}\n      />\n    </div>\n  );\n\n  const isDialog = showDismissButton;\n  const shouldTrapFocus = showDismissButton && variant !== 'annotation';\n\n  const dialogProps = isDialog\n    ? {\n        role: 'dialog',\n        'aria-modal': shouldTrapFocus ? true : undefined,\n        'aria-labelledby': ariaLabelledby ?? (header ? labelledById : undefined),\n      }\n    : {};\n\n  return (\n    <div\n      className={clsx(styles.body, className, {\n        [styles['body-overflow-visible']]: overflowVisible === 'both',\n      })}\n      onKeyDown={onKeyDown}\n      {...dialogProps}\n    >\n      <FocusLock disabled={!shouldTrapFocus} autoFocus={false}>\n        {header && (\n          <div className={clsx(styles['header-row'], showDismissButton && styles['has-dismiss'])}>\n            {dismissButton}\n            <div className={styles.header} id={labelledById}>\n              <h2>{header}</h2>\n            </div>\n          </div>\n        )}\n        <div className={!header && showDismissButton ? styles['has-dismiss'] : undefined}>\n          {!header && dismissButton}\n          <div className={clsx(styles.content, { [styles['content-overflow-visible']]: !!overflowVisible })}>\n            {children}\n          </div>\n        </div>\n      </FocusLock>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}