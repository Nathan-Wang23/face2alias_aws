{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useEffect, useRef } from 'react';\nimport { getFirstFocusable } from '../focus-lock/utils.js';\nimport styles from './styles.css.js';\nconst tokenSelector = `.${styles['list-item']}`;\nconst toggleButtonSelector = `.${styles.toggle}`;\nexport function useTokenFocusController(_ref) {\n  let {\n    removedItemIndex\n  } = _ref;\n  const tokenListRef = useRef(null);\n  useEffect(() => {\n    var _a, _b;\n    if (removedItemIndex === undefined || removedItemIndex === null || tokenListRef.current === null) {\n      return;\n    }\n    const tokenElements = tokenListRef.current.querySelectorAll(tokenSelector);\n    const toggleButton = tokenListRef.current.querySelector(toggleButtonSelector);\n    const activeItemIndices = [];\n    for (let i = 0; i < tokenElements.length; i++) {\n      if (!tokenElements[i].querySelector('[aria-disabled=\"true\"]')) {\n        activeItemIndices.push(i);\n      }\n    }\n    let closestPrevIndex = Number.NEGATIVE_INFINITY;\n    let closestNextIndex = Number.POSITIVE_INFINITY;\n    for (const activeIndex of activeItemIndices) {\n      if (activeIndex < removedItemIndex) {\n        closestPrevIndex = removedItemIndex - activeIndex < removedItemIndex - closestPrevIndex ? activeIndex : closestPrevIndex;\n      } else {\n        closestNextIndex = activeIndex - removedItemIndex < closestNextIndex - removedItemIndex ? activeIndex : closestNextIndex;\n      }\n    }\n    const nextElement = tokenElements[closestNextIndex];\n    const prevElement = tokenElements[closestPrevIndex];\n    if (nextElement instanceof HTMLElement) {\n      (_a = getFirstFocusable(nextElement)) === null || _a === void 0 ? void 0 : _a.focus();\n    } else if (prevElement instanceof HTMLElement) {\n      (_b = getFirstFocusable(prevElement)) === null || _b === void 0 ? void 0 : _b.focus();\n    } else if (toggleButton instanceof HTMLElement) {\n      toggleButton.focus();\n    }\n  }, [removedItemIndex]);\n  return tokenListRef;\n}","map":{"version":3,"names":["useEffect","useRef","getFirstFocusable","styles","tokenSelector","toggleButtonSelector","toggle","useTokenFocusController","_ref","removedItemIndex","tokenListRef","undefined","current","tokenElements","querySelectorAll","toggleButton","querySelector","activeItemIndices","i","length","push","closestPrevIndex","Number","NEGATIVE_INFINITY","closestNextIndex","POSITIVE_INFINITY","activeIndex","nextElement","prevElement","HTMLElement","_a","focus","_b"],"sources":["/Users/nathanwang/Downloads/aws_project/face2alias_aws/node_modules/@cloudscape-design/components/internal/components/token-list/lib/default/internal/components/token-list/token-focus-controller.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useEffect, useRef } from 'react';\nimport { getFirstFocusable } from '../focus-lock/utils.js';\nimport styles from './styles.css.js';\n\nconst tokenSelector = `.${styles['list-item']}`;\nconst toggleButtonSelector = `.${styles.toggle}`;\n\nexport function useTokenFocusController({ removedItemIndex }: { removedItemIndex?: null | number }) {\n  const tokenListRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (removedItemIndex === undefined || removedItemIndex === null || tokenListRef.current === null) {\n      return;\n    }\n\n    const tokenElements = tokenListRef.current.querySelectorAll(tokenSelector);\n    const toggleButton = tokenListRef.current.querySelector(toggleButtonSelector);\n\n    const activeItemIndices: number[] = [];\n    for (let i = 0; i < tokenElements.length; i++) {\n      if (!tokenElements[i].querySelector('[aria-disabled=\"true\"]')) {\n        activeItemIndices.push(i);\n      }\n    }\n\n    let closestPrevIndex = Number.NEGATIVE_INFINITY;\n    let closestNextIndex = Number.POSITIVE_INFINITY;\n\n    for (const activeIndex of activeItemIndices) {\n      if (activeIndex < removedItemIndex) {\n        closestPrevIndex =\n          removedItemIndex - activeIndex < removedItemIndex - closestPrevIndex ? activeIndex : closestPrevIndex;\n      } else {\n        closestNextIndex =\n          activeIndex - removedItemIndex < closestNextIndex - removedItemIndex ? activeIndex : closestNextIndex;\n      }\n    }\n\n    const nextElement = tokenElements[closestNextIndex];\n    const prevElement = tokenElements[closestPrevIndex];\n\n    if (nextElement instanceof HTMLElement) {\n      getFirstFocusable(nextElement)?.focus();\n    } else if (prevElement instanceof HTMLElement) {\n      getFirstFocusable(prevElement)?.focus();\n    } else if (toggleButton instanceof HTMLElement) {\n      toggleButton.focus();\n    }\n  }, [removedItemIndex]);\n\n  return tokenListRef;\n}\n"],"mappings":"AAAA;AACA;AAEA,SAASA,SAAS,EAAEC,MAAM,QAAQ,OAAO;AACzC,SAASC,iBAAiB,QAAQ,wBAAwB;AAC1D,OAAOC,MAAM,MAAM,iBAAiB;AAEpC,MAAMC,aAAa,GAAG,IAAID,MAAM,CAAC,WAAW,CAAC,EAAE;AAC/C,MAAME,oBAAoB,GAAG,IAAIF,MAAM,CAACG,MAAM,EAAE;AAEhD,OAAM,SAAUC,uBAAuBA,CAAAC,IAAA,EAA2D;EAAA,IAA1D;IAAEC;EAAgB,CAAwC,GAAAD,IAAA;EAChG,MAAME,YAAY,GAAGT,MAAM,CAAiB,IAAI,CAAC;EAEjDD,SAAS,CAAC,MAAK;;IACb,IAAIS,gBAAgB,KAAKE,SAAS,IAAIF,gBAAgB,KAAK,IAAI,IAAIC,YAAY,CAACE,OAAO,KAAK,IAAI,EAAE;MAChG;;IAGF,MAAMC,aAAa,GAAGH,YAAY,CAACE,OAAO,CAACE,gBAAgB,CAACV,aAAa,CAAC;IAC1E,MAAMW,YAAY,GAAGL,YAAY,CAACE,OAAO,CAACI,aAAa,CAACX,oBAAoB,CAAC;IAE7E,MAAMY,iBAAiB,GAAa,EAAE;IACtC,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGL,aAAa,CAACM,MAAM,EAAED,CAAC,EAAE,EAAE;MAC7C,IAAI,CAACL,aAAa,CAACK,CAAC,CAAC,CAACF,aAAa,CAAC,wBAAwB,CAAC,EAAE;QAC7DC,iBAAiB,CAACG,IAAI,CAACF,CAAC,CAAC;;;IAI7B,IAAIG,gBAAgB,GAAGC,MAAM,CAACC,iBAAiB;IAC/C,IAAIC,gBAAgB,GAAGF,MAAM,CAACG,iBAAiB;IAE/C,KAAK,MAAMC,WAAW,IAAIT,iBAAiB,EAAE;MAC3C,IAAIS,WAAW,GAAGjB,gBAAgB,EAAE;QAClCY,gBAAgB,GACdZ,gBAAgB,GAAGiB,WAAW,GAAGjB,gBAAgB,GAAGY,gBAAgB,GAAGK,WAAW,GAAGL,gBAAgB;OACxG,MAAM;QACLG,gBAAgB,GACdE,WAAW,GAAGjB,gBAAgB,GAAGe,gBAAgB,GAAGf,gBAAgB,GAAGiB,WAAW,GAAGF,gBAAgB;;;IAI3G,MAAMG,WAAW,GAAGd,aAAa,CAACW,gBAAgB,CAAC;IACnD,MAAMI,WAAW,GAAGf,aAAa,CAACQ,gBAAgB,CAAC;IAEnD,IAAIM,WAAW,YAAYE,WAAW,EAAE;MACtC,CAAAC,EAAA,GAAA5B,iBAAiB,CAACyB,WAAW,CAAC,cAAAG,EAAA,uBAAAA,EAAA,CAAEC,KAAK,EAAE;KACxC,MAAM,IAAIH,WAAW,YAAYC,WAAW,EAAE;MAC7C,CAAAG,EAAA,GAAA9B,iBAAiB,CAAC0B,WAAW,CAAC,cAAAI,EAAA,uBAAAA,EAAA,CAAED,KAAK,EAAE;KACxC,MAAM,IAAIhB,YAAY,YAAYc,WAAW,EAAE;MAC9Cd,YAAY,CAACgB,KAAK,EAAE;;EAExB,CAAC,EAAE,CAACtB,gBAAgB,CAAC,CAAC;EAEtB,OAAOC,YAAY;AACrB"},"metadata":{},"sourceType":"module","externalDependencies":[]}