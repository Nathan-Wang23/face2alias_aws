{"ast":null,"code":"var _jsxFileName = \"/Users/nathanwang/Downloads/aws_project/face2alias_aws/src/component/Home/ImageBox.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ImageBox = _ref => {\n  _s();\n\n  let {\n    image_base64,\n    boxesCoordinates,\n    width,\n    height,\n    color,\n    aliases\n  } = _ref;\n  const canvasRef = useRef(null);\n  useEffect(() => {\n    if (!image_base64 || !boxesCoordinates || boxesCoordinates.length === 0) return;\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const image = new Image();\n    image.src = `${image_base64}`;\n\n    image.onload = () => {\n      ctx.clearRect(0, 0, canvas.width, canvas.height); // make sure is clean \n\n      ctx.drawImage(image, 0, 0, width, height); // Draw boxes on the image based on the coordinates\n\n      for (let i = 0; i < boxesCoordinates.length; i++) {\n        // const {boxesCoordinates, aliasesImg} = boxWithName;// adding the alias \n        ctx.strokeStyle = color[i];\n        ctx.font = \"16px Arial\"; // set to aws font\n\n        ctx.lineWidth = 2;\n        ctx.strokeRect(boxesCoordinates[i].x, boxesCoordinates[i].y, boxesCoordinates[i].width, boxesCoordinates[i].height); // draw the box\n\n        if (aliases[i] != \"na\") {\n          ctx.fillStyle = \"#ffffff\";\n          const textWidth = ctx.measureText(aliases[i]).width;\n          ctx.fillRect(boxesCoordinates[i].x + boxesCoordinates[i].width / 2 - textWidth / 2 - 2, boxesCoordinates[i].y - 20, textWidth + 4, 20);\n          ctx.fillStyle = color[i];\n          ctx.fillStyle = \"#000000\";\n          ctx.fillText(aliases[i], boxesCoordinates[i].x + boxesCoordinates[i].width / 2 - textWidth / 2, boxesCoordinates[i].y - 5);\n        }\n      }\n    };\n  }, [image_base64, boxesCoordinates]);\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    ref: canvasRef,\n    width: width,\n    height: height\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 10\n  }, this);\n};\n\n_s(ImageBox, \"UJgi7ynoup7eqypjnwyX/s32POg=\");\n\n_c = ImageBox;\nexport default ImageBox;\n\nvar _c;\n\n$RefreshReg$(_c, \"ImageBox\");","map":{"version":3,"names":["React","useRef","useEffect","ImageBox","image_base64","boxesCoordinates","width","height","color","aliases","canvasRef","length","canvas","current","ctx","getContext","image","Image","src","onload","clearRect","drawImage","i","strokeStyle","font","lineWidth","strokeRect","x","y","fillStyle","textWidth","measureText","fillRect","fillText"],"sources":["/Users/nathanwang/Downloads/aws_project/face2alias_aws/src/component/Home/ImageBox.js"],"sourcesContent":["import React, { useRef, useEffect } from \"react\";\n\nconst ImageBox = ({ image_base64, boxesCoordinates, width, height, color, aliases}) => {\n  const canvasRef = useRef(null);\n\n  useEffect(() => {\n    if (!image_base64 || !boxesCoordinates || boxesCoordinates.length === 0) return;\n\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n\n    const image = new Image();\n    image.src = `${image_base64}`;\n\n    image.onload = () => {\n      ctx.clearRect(0, 0, canvas.width, canvas.height); // make sure is clean \n      ctx.drawImage(image, 0, 0, width, height);\n\n      // Draw boxes on the image based on the coordinates\n      for (let i = 0; i < boxesCoordinates.length; i++) {\n\n        // const {boxesCoordinates, aliasesImg} = boxWithName;// adding the alias \n\n        ctx.strokeStyle = color[i];\n        ctx.font = \"16px Arial\"; // set to aws font\n        ctx.lineWidth = 2;\n        ctx.strokeRect(boxesCoordinates[i].x, boxesCoordinates[i].y, boxesCoordinates[i].width, boxesCoordinates[i].height); // draw the box\n      \n\n        if (aliases[i] != \"na\") {\n          ctx.fillStyle = \"#ffffff\";\n          const textWidth = ctx.measureText(aliases[i]).width;\n          ctx.fillRect(boxesCoordinates[i].x + boxesCoordinates[i].width / 2 - textWidth / 2 - 2, boxesCoordinates[i].y - 20, textWidth + 4, 20);\n\n          ctx.fillStyle = color[i]; \n          ctx.fillStyle = \"#000000\";\n          ctx.fillText(aliases[i], boxesCoordinates[i].x + boxesCoordinates[i].width / 2 - textWidth / 2, boxesCoordinates[i].y -5);\n      }\n      }\n    };\n  }, [image_base64, boxesCoordinates]);\n\n  return <canvas ref={canvasRef} width={width} height={height} />;\n};\n\nexport default ImageBox;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}