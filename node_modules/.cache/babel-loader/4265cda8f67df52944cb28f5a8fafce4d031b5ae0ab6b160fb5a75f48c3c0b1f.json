{"ast":null,"code":"import { __rest } from \"tslib\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport useBaseComponent from '../internal/hooks/use-base-component';\nimport { useMergeRefs } from '../internal/hooks/use-merge-refs';\nimport { useEffect, useMemo, useRef, useState } from 'react';\nimport { useContainerBreakpoints } from '../internal/hooks/container-queries';\nimport { useReducedMotion, useVisualRefresh } from '../internal/hooks/use-visual-mode';\nimport { getBaseProps } from '../internal/base-component';\nimport { focusFlashById } from './flash';\nimport { isDevelopment } from '../internal/is-development';\nimport { warnOnce } from '@cloudscape-design/component-toolkit/internal';\nexport const componentName = 'Flashbar';\n// Common logic for collapsible and non-collapsible Flashbar\nexport function useFlashbar(_a) {\n  var {\n      items,\n      onItemsAdded,\n      onItemsChanged,\n      onItemsRemoved\n    } = _a,\n    restProps = __rest(_a, [\"items\", \"onItemsAdded\", \"onItemsChanged\", \"onItemsRemoved\"]);\n  const {\n    __internalRootRef\n  } = useBaseComponent(componentName);\n  const allItemsHaveId = useMemo(() => items.every(item => 'id' in item), [items]);\n  const baseProps = getBaseProps(restProps);\n  const ref = useRef(null);\n  const [breakpoint, breakpointRef] = useContainerBreakpoints(['xs']);\n  const mergedRef = useMergeRefs(ref, breakpointRef, __internalRootRef);\n  const isReducedMotion = useReducedMotion(breakpointRef);\n  const isVisualRefresh = useVisualRefresh();\n  const [previousItems, setPreviousItems] = useState(items);\n  const [nextFocusId, setNextFocusId] = useState(null);\n  if (isDevelopment) {\n    if (items === null || items === void 0 ? void 0 : items.some(item => item.ariaRole === 'alert' && !item.id)) {\n      warnOnce('Flashbar', `You provided \\`ariaRole=\"alert\"\\` for a flashbar item without providing an \\`id\\`. Focus will not be moved to the newly added flash message.`);\n    }\n  }\n  // Track new or removed item IDs in state to only trigger focus changes for newly added items.\n  // https://reactjs.org/docs/hooks-faq.html#how-do-i-implement-getderivedstatefromprops\n  if (items) {\n    const newItems = items.filter(_ref => {\n      let {\n        id\n      } = _ref;\n      return id && !previousItems.some(item => item.id === id);\n    });\n    const removedItems = previousItems.filter(_ref2 => {\n      let {\n        id\n      } = _ref2;\n      return id && !items.some(item => item.id === id);\n    });\n    if (newItems.length > 0 || removedItems.length > 0) {\n      setPreviousItems(items);\n      onItemsAdded === null || onItemsAdded === void 0 ? void 0 : onItemsAdded(newItems);\n      onItemsRemoved === null || onItemsRemoved === void 0 ? void 0 : onItemsRemoved(removedItems);\n      onItemsChanged === null || onItemsChanged === void 0 ? void 0 : onItemsChanged({\n        allItemsHaveId,\n        isReducedMotion\n      });\n      const newFocusItems = newItems.filter(_ref3 => {\n        let {\n          ariaRole\n        } = _ref3;\n        return ariaRole === 'alert';\n      });\n      if (newFocusItems.length > 0) {\n        setNextFocusId(newFocusItems[0].id);\n      }\n    }\n  }\n  useEffect(() => {\n    if (nextFocusId) {\n      focusFlashById(ref.current, nextFocusId);\n    }\n  }, [nextFocusId, ref]);\n  return {\n    allItemsHaveId,\n    baseProps,\n    breakpoint,\n    isReducedMotion,\n    isVisualRefresh,\n    mergedRef,\n    ref\n  };\n}","map":{"version":3,"names":["useBaseComponent","useMergeRefs","useEffect","useMemo","useRef","useState","useContainerBreakpoints","useReducedMotion","useVisualRefresh","getBaseProps","focusFlashById","isDevelopment","warnOnce","componentName","useFlashbar","_a","items","onItemsAdded","onItemsChanged","onItemsRemoved","restProps","__rest","__internalRootRef","allItemsHaveId","every","item","baseProps","ref","breakpoint","breakpointRef","mergedRef","isReducedMotion","isVisualRefresh","previousItems","setPreviousItems","nextFocusId","setNextFocusId","some","ariaRole","id","newItems","filter","_ref","removedItems","_ref2","length","newFocusItems","_ref3","current"],"sources":["/Users/ndwang/Documents/projects/face2alias_aws/node_modules/@cloudscape-design/components/flashbar/lib/default/flashbar/common.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport useBaseComponent from '../internal/hooks/use-base-component';\nimport { useMergeRefs } from '../internal/hooks/use-merge-refs';\nimport { useEffect, useMemo, useRef, useState } from 'react';\nimport { useContainerBreakpoints } from '../internal/hooks/container-queries';\nimport { useReducedMotion, useVisualRefresh } from '../internal/hooks/use-visual-mode';\nimport { getBaseProps } from '../internal/base-component';\nimport { FlashbarProps } from './interfaces';\nimport { focusFlashById } from './flash';\nimport { isDevelopment } from '../internal/is-development';\nimport { warnOnce } from '@cloudscape-design/component-toolkit/internal';\n\nexport const componentName = 'Flashbar';\n\n// Common logic for collapsible and non-collapsible Flashbar\nexport function useFlashbar({\n  items,\n  onItemsAdded,\n  onItemsChanged,\n  onItemsRemoved,\n  ...restProps\n}: FlashbarProps & {\n  onItemsAdded?: (items: FlashbarProps.MessageDefinition[]) => void;\n  onItemsRemoved?: (items: FlashbarProps.MessageDefinition[]) => void;\n  onItemsChanged?: (options?: { allItemsHaveId?: boolean; isReducedMotion?: boolean }) => void;\n}) {\n  const { __internalRootRef } = useBaseComponent(componentName);\n  const allItemsHaveId = useMemo(() => items.every(item => 'id' in item), [items]);\n  const baseProps = getBaseProps(restProps);\n  const ref = useRef<HTMLDivElement | null>(null);\n  const [breakpoint, breakpointRef] = useContainerBreakpoints(['xs']);\n  const mergedRef = useMergeRefs(ref, breakpointRef, __internalRootRef);\n  const isReducedMotion = useReducedMotion(breakpointRef as any);\n  const isVisualRefresh = useVisualRefresh();\n  const [previousItems, setPreviousItems] = useState<ReadonlyArray<FlashbarProps.MessageDefinition>>(items);\n  const [nextFocusId, setNextFocusId] = useState<string | null>(null);\n\n  if (isDevelopment) {\n    if (items?.some(item => item.ariaRole === 'alert' && !item.id)) {\n      warnOnce(\n        'Flashbar',\n        `You provided \\`ariaRole=\"alert\"\\` for a flashbar item without providing an \\`id\\`. Focus will not be moved to the newly added flash message.`\n      );\n    }\n  }\n\n  // Track new or removed item IDs in state to only trigger focus changes for newly added items.\n  // https://reactjs.org/docs/hooks-faq.html#how-do-i-implement-getderivedstatefromprops\n  if (items) {\n    const newItems = items.filter(({ id }) => id && !previousItems.some(item => item.id === id));\n    const removedItems = previousItems.filter(({ id }) => id && !items.some(item => item.id === id));\n    if (newItems.length > 0 || removedItems.length > 0) {\n      setPreviousItems(items);\n      onItemsAdded?.(newItems);\n      onItemsRemoved?.(removedItems);\n      onItemsChanged?.({ allItemsHaveId, isReducedMotion });\n\n      const newFocusItems = newItems.filter(({ ariaRole }) => ariaRole === 'alert');\n      if (newFocusItems.length > 0) {\n        setNextFocusId(newFocusItems[0].id!);\n      }\n    }\n  }\n\n  useEffect(() => {\n    if (nextFocusId) {\n      focusFlashById(ref.current, nextFocusId);\n    }\n  }, [nextFocusId, ref]);\n\n  return {\n    allItemsHaveId,\n    baseProps,\n    breakpoint,\n    isReducedMotion,\n    isVisualRefresh,\n    mergedRef,\n    ref,\n  };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}